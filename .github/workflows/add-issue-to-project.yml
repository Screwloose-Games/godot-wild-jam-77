name: Add Issue to Project

on:
  issues:
    types: [opened]

jobs:
  add-to-project:
    runs-on: ubuntu-latest

    steps:
      - name: Add Issue to Project
        uses: actions/github-script@v6
        with:
          script: |
            const { context } = github; // Extract context from github

            const projectId = "PVT_kwDOCqVkQ84AvYfY";
            const issueId = context.payload.issue.node_id;

            await github.graphql(
              `
              mutation($input: AddProjectV2ItemByIdInput!) {
                addProjectV2ItemById(input: $input) {
                  item {
                    id
                  }
                }
              }
              `,
              {
                input: {
                  projectId: projectId,
                  contentId: issueId
                }
              }
            );
        env:
          GITHUB_TOKEN: ${{ secrets.PERSONAL_ACCESS_TOKEN }}
